{"ast":null,"code":"// src/utils/axiosInstance.js\nimport axios from \"axios\";\nconst axiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000\",\n  timeout: 10000,\n  // 10 seconds timeout\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Automatically attach token to every request\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// GLOBAL RESPONSE HANDLER\naxiosInstance.interceptors.response.use(response => response, error => {\n  var _error$response, _error$response$data, _error$response2, _error$response2$data, _error$response3;\n  const msg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.msg) || ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message;\n\n  // If token expired OR invalid → auto logout\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401 || msg === \"Invalid token\" || msg === \"Unauthorized\") {\n    console.warn(\"Token expired or invalid. Auto-logout triggered.\");\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    localStorage.removeItem(\"userId\");\n\n    // Force redirect to login\n    window.location.href = \"/login\";\n  }\n  return Promise.reject(error);\n});\nexport default axiosInstance;","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","msg","data","message","status","console","warn","removeItem","window","location","href"],"sources":["C:/Users/jojin/Downloads/task for  codesoft(web development)/projects/job-board/frontend/src/utils/axiosInstance.js"],"sourcesContent":["// src/utils/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000\",\r\n  timeout: 10000, // 10 seconds timeout\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Automatically attach token to every request\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// GLOBAL RESPONSE HANDLER\r\naxiosInstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    const msg =\r\n      error.response?.data?.msg ||\r\n      error.response?.data?.error ||\r\n      error.message;\r\n\r\n    // If token expired OR invalid → auto logout\r\n    if (\r\n      error.response?.status === 401 ||\r\n      msg === \"Invalid token\" ||\r\n      msg === \"Unauthorized\"\r\n    ) {\r\n      console.warn(\"Token expired or invalid. Auto-logout triggered.\");\r\n\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"user\");\r\n      localStorage.removeItem(\"role\");\r\n      localStorage.removeItem(\"userId\");\r\n\r\n      // Force redirect to login\r\n      window.location.href = \"/login\";\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM,CAAC;EACjCC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EACjEC,OAAO,EAAE,KAAK;EAAE;EAChBC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAP,aAAa,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CACnCC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAK,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;;AAED;AACAhB,aAAa,CAACQ,YAAY,CAACW,QAAQ,CAACT,GAAG,CACpCS,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EAAA,IAAAI,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,qBAAA,EAAAC,gBAAA;EACT,MAAMC,GAAG,GACP,EAAAL,eAAA,GAAAJ,KAAK,CAACG,QAAQ,cAAAC,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBM,IAAI,cAAAL,oBAAA,uBAApBA,oBAAA,CAAsBI,GAAG,OAAAH,gBAAA,GACzBN,KAAK,CAACG,QAAQ,cAAAG,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBI,IAAI,cAAAH,qBAAA,uBAApBA,qBAAA,CAAsBP,KAAK,KAC3BA,KAAK,CAACW,OAAO;;EAEf;EACA,IACE,EAAAH,gBAAA,GAAAR,KAAK,CAACG,QAAQ,cAAAK,gBAAA,uBAAdA,gBAAA,CAAgBI,MAAM,MAAK,GAAG,IAC9BH,GAAG,KAAK,eAAe,IACvBA,GAAG,KAAK,cAAc,EACtB;IACAI,OAAO,CAACC,IAAI,CAAC,kDAAkD,CAAC;IAEhEjB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;IAChClB,YAAY,CAACkB,UAAU,CAAC,MAAM,CAAC;IAC/BlB,YAAY,CAACkB,UAAU,CAAC,MAAM,CAAC;IAC/BlB,YAAY,CAACkB,UAAU,CAAC,QAAQ,CAAC;;IAEjC;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EAEA,OAAOjB,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAehB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}