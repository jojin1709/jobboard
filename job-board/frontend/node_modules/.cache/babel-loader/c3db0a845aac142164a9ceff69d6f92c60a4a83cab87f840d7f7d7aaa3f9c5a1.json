{"ast":null,"code":"// src/utils/axiosInstance.js\nimport axios from \"axios\";\nconst axiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000\",\n  timeout: 15000\n});\n\n// Attach token automatically\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n\n  // Only set JSON header when NOT sending FormData\n  if (!(config.data instanceof FormData)) {\n    config.headers[\"Content-Type\"] = \"application/json\";\n  }\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Global response handling\naxiosInstance.interceptors.response.use(res => res, err => {\n  var _err$response, _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n  const status = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status;\n  const msg = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || err.message;\n\n  // Token invalid OR expired\n  if (status === 401 || msg === \"Invalid or malformed token\" || msg === \"Token expired\" || msg === \"Invalid token\") {\n    console.warn(\"üîê Session expired ‚Üí Logging out\");\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    localStorage.removeItem(\"userId\");\n    window.location.href = \"/login\";\n  }\n  return Promise.reject(err);\n});\nexport default axiosInstance;","map":{"version":3,"names":["axios","axiosInstance","create","baseURL","process","env","REACT_APP_API_URL","timeout","interceptors","request","use","config","token","localStorage","getItem","data","FormData","headers","Authorization","error","Promise","reject","response","res","err","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response3$data","status","msg","message","console","warn","removeItem","window","location","href"],"sources":["C:/Users/jojin/Downloads/task for  codesoft(web development)/projects/job-board/frontend/src/utils/axiosInstance.js"],"sourcesContent":["// src/utils/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || \"http://localhost:5000\",\r\n  timeout: 15000,\r\n});\r\n\r\n// Attach token automatically\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    // Only set JSON header when NOT sending FormData\r\n    if (!(config.data instanceof FormData)) {\r\n      config.headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Global response handling\r\naxiosInstance.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    const status = err.response?.status;\r\n    const msg =\r\n      err.response?.data?.msg ||\r\n      err.response?.data?.error ||\r\n      err.message;\r\n\r\n    // Token invalid OR expired\r\n    if (\r\n      status === 401 ||\r\n      msg === \"Invalid or malformed token\" ||\r\n      msg === \"Token expired\" ||\r\n      msg === \"Invalid token\"\r\n    ) {\r\n      console.warn(\"üîê Session expired ‚Üí Logging out\");\r\n\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"user\");\r\n      localStorage.removeItem(\"role\");\r\n      localStorage.removeItem(\"userId\");\r\n\r\n      window.location.href = \"/login\";\r\n    }\r\n\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM,CAAC;EACjCC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EACjEC,OAAO,EAAE;AACX,CAAC,CAAC;;AAEF;AACAN,aAAa,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CACnCC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;EAE3C;EACA,IAAI,EAAEH,MAAM,CAACI,IAAI,YAAYC,QAAQ,CAAC,EAAE;IACtCL,MAAM,CAACM,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EACrD;EAEA,IAAIL,KAAK,EAAE;IACTD,MAAM,CAACM,OAAO,CAACC,aAAa,GAAG,UAAUN,KAAK,EAAE;EAClD;EAEA,OAAOD,MAAM;AACf,CAAC,EACAQ,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;;AAED;AACAlB,aAAa,CAACO,YAAY,CAACc,QAAQ,CAACZ,GAAG,CACpCa,GAAG,IAAKA,GAAG,EACXC,GAAG,IAAK;EAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;EACP,MAAMC,MAAM,IAAAL,aAAA,GAAGD,GAAG,CAACF,QAAQ,cAAAG,aAAA,uBAAZA,aAAA,CAAcK,MAAM;EACnC,MAAMC,GAAG,GACP,EAAAL,cAAA,GAAAF,GAAG,CAACF,QAAQ,cAAAI,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcX,IAAI,cAAAY,mBAAA,uBAAlBA,mBAAA,CAAoBI,GAAG,OAAAH,cAAA,GACvBJ,GAAG,CAACF,QAAQ,cAAAM,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcb,IAAI,cAAAc,mBAAA,uBAAlBA,mBAAA,CAAoBV,KAAK,KACzBK,GAAG,CAACQ,OAAO;;EAEb;EACA,IACEF,MAAM,KAAK,GAAG,IACdC,GAAG,KAAK,4BAA4B,IACpCA,GAAG,KAAK,eAAe,IACvBA,GAAG,KAAK,eAAe,EACvB;IACAE,OAAO,CAACC,IAAI,CAAC,kCAAkC,CAAC;IAEhDrB,YAAY,CAACsB,UAAU,CAAC,OAAO,CAAC;IAChCtB,YAAY,CAACsB,UAAU,CAAC,MAAM,CAAC;IAC/BtB,YAAY,CAACsB,UAAU,CAAC,MAAM,CAAC;IAC/BtB,YAAY,CAACsB,UAAU,CAAC,QAAQ,CAAC;IAEjCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EAEA,OAAOlB,OAAO,CAACC,MAAM,CAACG,GAAG,CAAC;AAC5B,CACF,CAAC;AAED,eAAevB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}