{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jojin\\\\Downloads\\\\task for  codesoft(web development)\\\\projects\\\\job-board\\\\frontend\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/Home.js\nimport React, { useEffect, useState } from \"react\";\nimport axiosInstance from \"../utils/axiosInstance\"; // your axios config\nimport { toast } from \"react-toastify\"; // optional, for notifications\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [jobs, setJobs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [userId, setUserId] = useState(null); // logged-in user ID\n\n  // Fetch jobs from backend\n  useEffect(() => {\n    const fetchJobs = async () => {\n      try {\n        const res = await axiosInstance.get(\"/jobs\");\n        setJobs(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n        setLoading(false);\n      }\n    };\n\n    // If you store logged-in user info in localStorage\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (user) setUserId(user._id);\n    fetchJobs();\n  }, []);\n\n  // Apply job\n  const handleApply = async jobId => {\n    if (!userId) {\n      toast.error(\"Please login to apply for jobs.\");\n      return;\n    }\n    try {\n      const res = await axiosInstance.post(`/jobs/apply/${jobId}`);\n      toast.success(res.data.msg || \"Applied successfully!\");\n      // Optional: mark job as applied in frontend\n      setJobs(prevJobs => prevJobs.map(job => job._id === jobId ? {\n        ...job,\n        applicants: [...job.applicants, userId]\n      } : job));\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      toast.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || \"Failed to apply\");\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading jobs...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto px-4 py-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-6\",\n      children: \"Job Listings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), jobs.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No jobs available\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n      children: jobs.map(job => {\n        var _job$applicants, _job$applicants2, _job$applicants3;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded-lg p-4 shadow hover:shadow-lg transition\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: job.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: job.company\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700 mt-2\",\n            children: job.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 mt-1\",\n            children: [\"Location: \", job.location, \" | Salary: \", job.salary]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleApply(job._id),\n            disabled: (_job$applicants = job.applicants) === null || _job$applicants === void 0 ? void 0 : _job$applicants.includes(userId),\n            className: `mt-4 w-full py-2 rounded text-white ${(_job$applicants2 = job.applicants) !== null && _job$applicants2 !== void 0 && _job$applicants2.includes(userId) ? \"bg-gray-400 cursor-not-allowed\" : \"bg-green-500 hover:bg-green-600\"}`,\n            children: (_job$applicants3 = job.applicants) !== null && _job$applicants3 !== void 0 && _job$applicants3.includes(userId) ? \"Already Applied\" : \"Apply Job\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, job._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"M2RCWCRvCC2domzHl1i94Pg3dz0=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","axiosInstance","toast","jsxDEV","_jsxDEV","Home","_s","jobs","setJobs","loading","setLoading","userId","setUserId","fetchJobs","res","get","data","err","console","error","user","JSON","parse","localStorage","getItem","_id","handleApply","jobId","post","success","msg","prevJobs","map","job","applicants","_err$response","_err$response$data","response","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","_job$applicants","_job$applicants2","_job$applicants3","title","company","description","location","salary","onClick","disabled","includes","_c","$RefreshReg$"],"sources":["C:/Users/jojin/Downloads/task for  codesoft(web development)/projects/job-board/frontend/src/pages/Home.js"],"sourcesContent":["// frontend/src/pages/Home.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../utils/axiosInstance\"; // your axios config\r\nimport { toast } from \"react-toastify\"; // optional, for notifications\r\n\r\nconst Home = () => {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userId, setUserId] = useState(null); // logged-in user ID\r\n\r\n  // Fetch jobs from backend\r\n  useEffect(() => {\r\n    const fetchJobs = async () => {\r\n      try {\r\n        const res = await axiosInstance.get(\"/jobs\");\r\n        setJobs(res.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    // If you store logged-in user info in localStorage\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (user) setUserId(user._id);\r\n\r\n    fetchJobs();\r\n  }, []);\r\n\r\n  // Apply job\r\n  const handleApply = async (jobId) => {\r\n    if (!userId) {\r\n      toast.error(\"Please login to apply for jobs.\");\r\n      return;\r\n    }\r\n    try {\r\n      const res = await axiosInstance.post(`/jobs/apply/${jobId}`);\r\n      toast.success(res.data.msg || \"Applied successfully!\");\r\n      // Optional: mark job as applied in frontend\r\n      setJobs((prevJobs) =>\r\n        prevJobs.map((job) =>\r\n          job._id === jobId\r\n            ? { ...job, applicants: [...job.applicants, userId] }\r\n            : job\r\n        )\r\n      );\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(err.response?.data?.msg || \"Failed to apply\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading jobs...</p>;\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-6\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Job Listings</h1>\r\n      {jobs.length === 0 && <p>No jobs available</p>}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {jobs.map((job) => (\r\n          <div\r\n            key={job._id}\r\n            className=\"border rounded-lg p-4 shadow hover:shadow-lg transition\"\r\n          >\r\n            <h2 className=\"text-xl font-semibold\">{job.title}</h2>\r\n            <p className=\"text-gray-600\">{job.company}</p>\r\n            <p className=\"text-gray-700 mt-2\">{job.description}</p>\r\n            <p className=\"text-gray-500 mt-1\">\r\n              Location: {job.location} | Salary: {job.salary}\r\n            </p>\r\n            <button\r\n              onClick={() => handleApply(job._id)}\r\n              disabled={job.applicants?.includes(userId)}\r\n              className={`mt-4 w-full py-2 rounded text-white ${\r\n                job.applicants?.includes(userId)\r\n                  ? \"bg-gray-400 cursor-not-allowed\"\r\n                  : \"bg-green-500 hover:bg-green-600\"\r\n              }`}\r\n            >\r\n              {job.applicants?.includes(userId) ? \"Already Applied\" : \"Apply Job\"}\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,aAAa,MAAM,wBAAwB,CAAC,CAAC;AACpD,SAASC,KAAK,QAAQ,gBAAgB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE5C;EACAD,SAAS,CAAC,MAAM;IACd,MAAMc,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMb,aAAa,CAACc,GAAG,CAAC,OAAO,CAAC;QAC5CP,OAAO,CAACM,GAAG,CAACE,IAAI,CAAC;QACjBN,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,CAAC,OAAOO,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;QAClBP,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;;IAED;IACA,MAAMU,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrD,IAAIJ,IAAI,EAAER,SAAS,CAACQ,IAAI,CAACK,GAAG,CAAC;IAE7BZ,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMa,WAAW,GAAG,MAAOC,KAAK,IAAK;IACnC,IAAI,CAAChB,MAAM,EAAE;MACXT,KAAK,CAACiB,KAAK,CAAC,iCAAiC,CAAC;MAC9C;IACF;IACA,IAAI;MACF,MAAML,GAAG,GAAG,MAAMb,aAAa,CAAC2B,IAAI,CAAC,eAAeD,KAAK,EAAE,CAAC;MAC5DzB,KAAK,CAAC2B,OAAO,CAACf,GAAG,CAACE,IAAI,CAACc,GAAG,IAAI,uBAAuB,CAAC;MACtD;MACAtB,OAAO,CAAEuB,QAAQ,IACfA,QAAQ,CAACC,GAAG,CAAEC,GAAG,IACfA,GAAG,CAACR,GAAG,KAAKE,KAAK,GACb;QAAE,GAAGM,GAAG;QAAEC,UAAU,EAAE,CAAC,GAAGD,GAAG,CAACC,UAAU,EAAEvB,MAAM;MAAE,CAAC,GACnDsB,GACN,CACF,CAAC;IACH,CAAC,CAAC,OAAOhB,GAAG,EAAE;MAAA,IAAAkB,aAAA,EAAAC,kBAAA;MACZlB,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBf,KAAK,CAACiB,KAAK,CAAC,EAAAgB,aAAA,GAAAlB,GAAG,CAACoB,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcnB,IAAI,cAAAoB,kBAAA,uBAAlBA,kBAAA,CAAoBN,GAAG,KAAI,iBAAiB,CAAC;IAC3D;EACF,CAAC;EAED,IAAIrB,OAAO,EAAE,oBAAOL,OAAA;IAAAkC,QAAA,EAAG;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAG,CAAC;EAE1C,oBACEtC,OAAA;IAAKuC,SAAS,EAAC,6BAA6B;IAAAL,QAAA,gBAC1ClC,OAAA;MAAIuC,SAAS,EAAC,yBAAyB;MAAAL,QAAA,EAAC;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACxDnC,IAAI,CAACqC,MAAM,KAAK,CAAC,iBAAIxC,OAAA;MAAAkC,QAAA,EAAG;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAC9CtC,OAAA;MAAKuC,SAAS,EAAC,sDAAsD;MAAAL,QAAA,EAClE/B,IAAI,CAACyB,GAAG,CAAEC,GAAG;QAAA,IAAAY,eAAA,EAAAC,gBAAA,EAAAC,gBAAA;QAAA,oBACZ3C,OAAA;UAEEuC,SAAS,EAAC,yDAAyD;UAAAL,QAAA,gBAEnElC,OAAA;YAAIuC,SAAS,EAAC,uBAAuB;YAAAL,QAAA,EAAEL,GAAG,CAACe;UAAK;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACtDtC,OAAA;YAAGuC,SAAS,EAAC,eAAe;YAAAL,QAAA,EAAEL,GAAG,CAACgB;UAAO;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC9CtC,OAAA;YAAGuC,SAAS,EAAC,oBAAoB;YAAAL,QAAA,EAAEL,GAAG,CAACiB;UAAW;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvDtC,OAAA;YAAGuC,SAAS,EAAC,oBAAoB;YAAAL,QAAA,GAAC,YACtB,EAACL,GAAG,CAACkB,QAAQ,EAAC,aAAW,EAAClB,GAAG,CAACmB,MAAM;UAAA;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC,eACJtC,OAAA;YACEiD,OAAO,EAAEA,CAAA,KAAM3B,WAAW,CAACO,GAAG,CAACR,GAAG,CAAE;YACpC6B,QAAQ,GAAAT,eAAA,GAAEZ,GAAG,CAACC,UAAU,cAAAW,eAAA,uBAAdA,eAAA,CAAgBU,QAAQ,CAAC5C,MAAM,CAAE;YAC3CgC,SAAS,EAAE,uCACT,CAAAG,gBAAA,GAAAb,GAAG,CAACC,UAAU,cAAAY,gBAAA,eAAdA,gBAAA,CAAgBS,QAAQ,CAAC5C,MAAM,CAAC,GAC5B,gCAAgC,GAChC,iCAAiC,EACpC;YAAA2B,QAAA,EAEF,CAAAS,gBAAA,GAAAd,GAAG,CAACC,UAAU,cAAAa,gBAAA,eAAdA,gBAAA,CAAgBQ,QAAQ,CAAC5C,MAAM,CAAC,GAAG,iBAAiB,GAAG;UAAW;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC;QAAA,GAnBJT,GAAG,CAACR,GAAG;UAAAc,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAoBT,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACpC,EAAA,CAlFID,IAAI;AAAAmD,EAAA,GAAJnD,IAAI;AAoFV,eAAeA,IAAI;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}